[fn count-words [text]
  [pipe [split text " "]
    [filter [fn [w] [not [empty? w]]]]
    [fold {} [fn [acc word]
      [update acc word [fn [n] [+ [or n 0] 1]]]]]]]

[fn main []
  [let text "the quick brown fox jumps over the lazy dog the fox"]
  [let counts [count-words text]]
  [pipe [entries counts]
    [sort-by [fn [[_ n]] n] :desc]
    [take 10]
    [each [fn [[word n]]
      [println [str word ": " n]]]]]]
